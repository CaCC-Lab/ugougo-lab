# EnglishSpeakingGym 簡易実装計画

作成日: 2025年6月29日

## 概要

FractionMasterLabの成功例を参考に、既存資産を最大限活用しながら段階的に統合を進める実装計画です。最小限の実装で動作する初期バージョンから始め、段階的に機能を拡張していきます。

## Phase 1: 最小限実装（MVP）- 3日間

### Day 1: 基盤構築とナビゲーション
```
目標: 教材の枠組みとモジュール選択画面の実装
```

1. **ディレクトリ構造の作成**
   ```bash
   mkdir -p src/materials/junior-high/grade1/english/EnglishSpeakingGym/{components,hooks,data,modules}
   ```

2. **基本ファイルの作成**
   - `index.tsx`: エントリーポイント
   - `EnglishSpeakingGym.tsx`: メインコンポーネント（モジュール選択UI）
   - `types.ts`: 型定義

3. **モジュール選択画面の実装**
   - 4つのモジュールカード表示
   - 各モジュールの説明とアイコン
   - クリックで各モジュールへ遷移（初期は空ページ）

### Day 2: 既存コンポーネントの移植
```
目標: 2つの既存教材から核となるコンポーネントを移植
```

1. **PronunciationPracticeからの移植**
   - `PhonemeSelector`: 音素選択UI
   - `PracticeInterface`: 練習インターフェース（簡略版）
   - 音素データ（`phonemeData.ts`）のコピー

2. **EnglishSpeakingPracticeからの移植**
   - `ScenarioSelector`: シナリオ選択UI
   - `DialogueInterface`: 対話インターフェース（簡略版）
   - シナリオデータ（`dialogueScenarios.ts`）のコピー

3. **共通コンポーネントの抽出**
   - `PronunciationGuide`: 両教材から統合
   - `ProgressBar`: シンプルな進捗表示

### Day 3: 基本的な統合とテスト
```
目標: 最小限の機能で動作する統合教材の完成
```

1. **モジュール実装**
   - `PhoncticsModule`: 音素選択→練習の基本フロー
   - `ConversationModule`: シナリオ選択→対話の基本フロー
   - 他の2モジュールは「準備中」表示

2. **データ連携**
   - localStorage での簡易的な進捗保存
   - モジュール間での基本的なデータ共有

3. **動作確認**
   - 各モジュールへの遷移
   - 基本的な練習機能
   - エラーハンドリング

## Phase 2: 機能拡張（Week 2）

### 既存機能の完全移植
1. **発音モジュールの拡張**
   - 音声評価機能の移植
   - 視覚的ガイドの改善
   - より多くの音素データ

2. **会話モジュールの拡張**
   - すべてのシナリオの移植
   - 並び替え式問題の実装
   - フィードバック機能の強化

### 新規モジュールの追加
1. **単語練習モジュール**
   - 基本的な単語リスト
   - 発音と意味の表示
   - 簡単なクイズ機能

2. **フレーズ練習モジュール**
   - 日常フレーズのリスト
   - イントネーション表示
   - 練習機能

## Phase 3: 統合最適化（Week 3）

### モジュール間連携
1. **学習パスの実装**
   - 推奨される学習順序
   - 前提条件の設定
   - 段階的なアンロック

2. **統合進捗管理**
   - 全モジュールの進捗を一元管理
   - スキルマップの表示
   - 成果の可視化

### パフォーマンス最適化
1. **コード分割**
   - 各モジュールの動的インポート
   - 必要時のみの読み込み

2. **データ最適化**
   - 共通データの一元化
   - キャッシュの活用

## Phase 4: 移行と公開（Week 4）

### 段階的移行
1. **並行運用開始**
   - EnglishSpeakingGym を有効化
   - 旧教材は「非推奨」表示

2. **ユーザーガイド作成**
   - 移行案内の表示
   - 新機能の説明

3. **フィードバック収集**
   - 使用状況の監視
   - 問題点の修正

### 完全移行
1. **旧教材の無効化**
   - materialMetadata.ts の更新
   - リダイレクト設定

2. **コードクリーンアップ**
   - 不要なコードの削除
   - ドキュメントの更新

## 実装の優先順位

### 必須機能（MVP）
- [x] モジュール選択画面
- [x] 基礎発音モジュール（最小限）
- [x] 会話モジュール（最小限）
- [x] 基本的なナビゲーション
- [x] 簡易的な進捗保存

### 重要機能（Phase 2）
- [ ] 完全な発音練習機能
- [ ] 完全な会話練習機能
- [ ] 単語練習モジュール
- [ ] フレーズ練習モジュール
- [ ] 詳細なフィードバック

### 追加機能（Phase 3以降）
- [ ] 学習パス機能
- [ ] 統合進捗管理
- [ ] 成果の可視化
- [ ] カスタマイズ機能

## 既存資産の活用方法

### 再利用可能なコンポーネント
```typescript
// PronunciationPractice から
- PhonemeSelector (UI)
- PracticeInterface (ロジック簡略化)
- phonemeData (データ)
- usePronunciationPractice (hooks、一部修正)

// EnglishSpeakingPractice から
- ScenarioSelector (UI)
- DialogueInterface (ロジック簡略化)
- dialogueScenarios (データ)
- useSpeakingPractice (hooks、一部修正)
```

### 共通化するコンポーネント
```typescript
// 両教材から抽出・統合
- PronunciationGuide
- ProgressIndicator
- AudioPlayer
- FeedbackDisplay
```

### 新規作成が必要なもの
```typescript
// ナビゲーション
- ModuleSelector
- LearningPath

// 統合管理
- ProgressTracker
- SkillMap

// 新規モジュール
- WordPracticeModule
- PhrasePracticeModule
```

## リスク管理

### 技術的リスクと対策
1. **複雑性の増加**
   - 対策: 段階的実装でシンプルに保つ
   - MVPでは最小限の機能のみ

2. **既存コードの依存関係**
   - 対策: インターフェースを定義して疎結合に
   - 必要に応じてコピー＆修正

3. **パフォーマンス問題**
   - 対策: 初期は問題にならない規模で実装
   - 後から最適化

### スケジュールリスクと対策
1. **実装の遅延**
   - 対策: MVPの範囲を厳密に定義
   - 必須機能のみに集中

2. **テスト時間の不足**
   - 対策: 自動テストは後回し
   - 手動での基本動作確認を優先

## 成功の定義（MVP時点）

- **動作**: エラーなく基本機能が動作する
- **UI**: 統一感のある見た目
- **UX**: スムーズなモジュール間遷移
- **データ**: 基本的な進捗が保存される
- **移行**: 旧教材からアクセス可能

## 次のステップ

1. **即座に実行**
   - ディレクトリ構造の作成
   - 基本ファイルのセットアップ

2. **Day 1完了時**
   - モジュール選択画面の動作確認
   - 基本的なルーティング

3. **MVP完了時**
   - 動作確認とバグ修正
   - Phase 2の詳細計画