# UnifiedGraphTool 機能比較表

## 既存教材の機能一覧

### 1. FunctionGraphTool（高校1年生向け）

#### 主要機能
- **関数タイプ**: 7種類（一次、二次、三次、正弦、余弦、指数、対数）
- **パラメータ調整**: a, b, c のスライダー（-5 〜 5）
- **アニメーション**: グラフ描画のプログレッシブアニメーション
- **モード**: 自由操作、クイズ（式を求める）
- **インタラクション**: パラメータ変更時の即時反映

#### 特徴的な機能
- 関数式の動的表示
- アニメーション速度制御
- 変化の割合の視覚化（矢印表示）
- 学習履歴の記録（recordAnswer, recordInteraction）

### 2. LinearFunctionGrapher（中学2年生向け）

#### 主要機能
- **モード**: 自由操作、2点通過、クイズ、実生活
- **関数**: 一次関数（y = ax + b）専門
- **表示オプション**: グリッド、切片表示の切り替え
- **第2の直線**: オプションで2本目の直線を表示

#### 特徴的な機能
- 2点を通る直線の自動計算
- 実生活の例（タクシー料金、携帯電話料金、水槽の水量）
- 交点の計算と表示
- x切片、y切片の明示的表示
- 変化の割合の段階的説明

### 3. QuadraticFunctionGraph（中学3年生向け）

#### 主要機能
- **関数**: 二次関数（y = ax² + bx + c）専門
- **表示オプション**: 頂点、軸、x切片の表示切り替え
- **変形**: 一般形と標準形の切り替え
- **アニメーション**: パラメータ変更時のスムーズな遷移

#### 特徴的な機能
- 頂点と軸の自動計算・表示
- 判別式の計算と解の個数表示
- 標準形への変形過程の表示
- グラフの凹凸判定（上に凸/下に凸）
- クリックで座標表示

## 統合方針

### 共通化する機能

| 機能カテゴリ | 統合方法 | 実装優先度 |
|------------|---------|-----------|
| グラフ描画エンジン | Canvas APIを統一、座標変換を共通化 | 高 |
| パラメータ調整UI | 統一されたスライダーコンポーネント | 高 |
| アニメーション | 共通のアニメーションフレームワーク | 中 |
| 学習履歴記録 | MaterialWrapperの活用 | 高 |
| 表示オプション | 統一されたトグルボタングループ | 中 |

### 学年別に差別化する機能

#### 小学5-6年生
- 利用可能な関数: 比例（y = ax）のみ
- パラメータ: a のみ（整数値）
- 実生活例: 買い物、速さと時間
- 説明: アニメーション重視、専門用語を避ける

#### 中学1年生
- 利用可能な関数: 一次関数（y = ax + b）
- パラメータ: a, b（小数第1位まで）
- 新機能: 2点通過モード
- 実生活例: 料金計算、温度変化

#### 中学2-3年生
- 利用可能な関数: 一次関数、二次関数
- パラメータ: a, b, c（小数第2位まで）
- 新機能: 交点計算、頂点表示
- 実生活例: 放物運動、面積問題

#### 高校生
- 利用可能な関数: 全種類
- パラメータ: 制限なし
- 新機能: 微分の概念、関数の合成
- 実生活例: 物理現象、経済モデル

### 新規追加機能

1. **ガイド付き学習モード**
   - ステップバイステップの説明
   - インタラクティブなチュートリアル
   - 理解度チェックポイント

2. **比較モード**
   - 複数の関数を同時表示
   - パラメータの影響を比較
   - 関数族の理解促進

3. **データ入力モード**
   - 実測データのプロット
   - 最適な関数のフィッティング
   - 予測と検証

4. **協調学習機能**
   - クラス内での画面共有
   - 教師用コントロールパネル
   - 生徒の理解度可視化

## 移行時の注意点

### データ互換性
- 既存の学習履歴を引き継ぐ
- クイズの問題形式を統一
- スコアリングシステムの標準化

### UI/UXの継続性
- 既存ユーザーが迷わない設計
- 段階的な新機能の導入
- ヘルプとツールチップの充実

### パフォーマンス考慮
- 機能増加によるメモリ使用量の管理
- 描画処理の最適化
- レスポンシブデザインの維持