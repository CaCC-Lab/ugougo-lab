# 分数計算トレーナー

小学3年生〜中学生向けの包括的な分数学習教材。視覚的理解から実生活応用まで、段階的に分数をマスターできます。

## 教材の特徴

### 1. 10段階の学習モード
- **概念理解**: 分数とは何か、視覚的に理解
- **表現**: 円、長方形、数直線での分数表現
- **等しい分数**: 約分・通分の練習
- **大小比較**: 分数の大きさを比べる
- **足し算・引き算**: 同分母・異分母の計算
- **かけ算・わり算**: 分数同士の乗除
- **帯分数**: 帯分数と仮分数の変換
- **応用問題**: 実生活での活用

### 2. 多彩な学習ツール
- **視覚化ツール**: 3種類の表現方法（円・長方形・数直線）
- **インタラクティブ計算機**: ステップバイステップの解法表示
- **変換練習ツール**: 約分・通分・変換の専門練習
- **実生活問題**: 料理・時間・お金などの身近な題材

### 3. 個別最適化学習
- **誤答パターン分析**: 8種類の間違いタイプを識別
- **段階的ヒント**: 最大3段階のヒント表示
- **習熟度トラッキング**: スキル別の進捗管理
- **適応的問題選択**: 学習状況に応じた問題提示

### 4. ゲーミフィケーション
- **達成バッジシステム**: 学習成果の可視化
- **進捗グラフ**: リアルタイムの成長確認
- **デイリーゴール**: 継続的な学習習慣
- **レベルアップ機能**: モチベーション維持

## 技術的特徴

### コンポーネント構成
```
FractionTrainer/
├── components/
│   ├── FractionVisualizer.tsx    # 視覚的表現
│   ├── FractionCalculator.tsx    # 計算機
│   ├── FractionConverter.tsx     # 変換練習
│   └── RealWorldProblems.tsx     # 実生活問題
├── hooks/
│   └── useFractionLogic.ts       # 計算ロジック
├── data/
│   └── fractionProblems.ts       # 問題データベース
├── types.ts                      # 型定義
├── FractionTrainer.tsx           # メインコンポーネント
└── index.ts                      # エクスポート
```

### 主要機能
1. **高精度計算**: 浮動小数点誤差を考慮した分数計算
2. **Canvas描画**: 滑らかなアニメーション表現
3. **ドラッグ＆ドロップ**: 直感的な操作体験
4. **レスポンシブ対応**: 全デバイスで快適に学習

## 教育的配慮

### 学習指導要領との整合性
- 小学3年生: 分数の概念、簡単な分数
- 小学4年生: 同分母の加減
- 小学5年生: 異分母の加減、約分・通分
- 小学6年生: 分数の乗除
- 中学生: 複雑な計算、実生活応用

### つまずきポイントへの対策
1. **概念理解の困難**: 多様な視覚表現で直感的理解
2. **通分の混乱**: 最小公倍数の視覚化
3. **計算ミス**: ステップバイステップの確認
4. **実生活との断絶**: 身近な例題で関連付け

## 実装済みの問題数

### 基礎問題（24問）
- 概念理解: 3問
- 等しい分数: 2問
- 大小比較: 2問
- 足し算: 2問
- 引き算: 2問
- かけ算: 1問
- わり算: 1問
- 文章題: 2問
- 実生活応用: 9問

### 難易度分布
- レベル1（入門）: 3問
- レベル2（基礎）: 7問
- レベル3（標準）: 6問
- レベル4（応用）: 5問
- レベル5（発展）: 3問

## 使用方法

```typescript
import { FractionTrainer } from '@materials/elementary/grade3/math/FractionTrainer';

// 教材の使用
<FractionTrainer />
```

## 学習の流れ

### Phase 1: 基礎理解（推奨: 5-7日）
1. 概念理解モードで分数の意味を理解
2. 視覚化ツールで直感的に把握
3. 簡単な同分母の計算

### Phase 2: 技能習得（推奨: 10-14日）
1. 約分・通分をマスター
2. 異分母の計算に挑戦
3. 帯分数の扱いを学習

### Phase 3: 応用力育成（推奨: 7-10日）
1. かけ算・わり算に挑戦
2. 文章題を解く
3. 実生活での活用

## カスタマイズオプション

### 設定可能項目
- 難易度（やさしい/普通/難しい）
- ヒントレベル（なし/最小限/詳細）
- アニメーション速度
- 帯分数の使用可否
- 最大値の制限

### 拡張可能な機能
- 新しい問題の追加
- カスタム視覚表現
- 成績レポート機能
- 協調学習モード

## 今後の拡張予定

1. **音声ガイダンス**: 問題文と解説の読み上げ
2. **手書き入力**: タブレットでの自然な入力
3. **AIチューター**: 個別最適化された指導
4. **保護者向けレポート**: 学習状況の詳細分析
5. **ゲームモード**: より楽しい学習体験

## 開発者向け情報

### 問題追加方法
```typescript
// fractionProblems.ts に新しい問題を追加
export const newProblems: FractionProblem[] = [
  {
    id: 'new-problem-1',
    mode: 'addition',
    type: 'calculate',
    difficulty: 3,
    title: '新しい問題',
    description: '問題の説明',
    question: '1/2 + 1/3 = ?',
    fractions: [
      createFraction(1, 2),
      createFraction(1, 3)
    ],
    answer: {
      fraction: createFraction(5, 6)
    },
    hints: ['ヒント1', 'ヒント2', 'ヒント3'],
    tags: ['足し算', '異分母']
  }
];
```

### 新しい視覚表現の追加
```typescript
// FractionVisualizer.tsx に描画関数を追加
const drawNewVisualization = (
  ctx: CanvasRenderingContext2D,
  width: number,
  height: number
) => {
  // カスタム描画ロジック
};
```

## 技術仕様

- **React**: 18.2.0
- **TypeScript**: 5.0.4
- **Material-UI**: 7.1.1
- **Framer Motion**: 10.12.16
- **Canvas API**: 視覚表現
- **Zustand**: 状態管理（学習進捗）

## パフォーマンス最適化

- 問題データの遅延読み込み
- Canvas描画の最適化
- メモ化による再レンダリング削減
- 画像アセットの事前読み込み

## アクセシビリティ

- キーボードナビゲーション対応
- スクリーンリーダー対応
- 高コントラストモード
- フォントサイズ調整機能

## ライセンス

本教材は教育目的での使用を前提としています。商用利用については別途お問い合わせください。