# 一次方程式ビルダー

中学1年生向けの一次方程式学習教材。天秤のメタファーを使って等式の性質を視覚的に理解し、段階的に一次方程式の解法を習得します。

## 教材の特徴

### 1. 8段階の学習モード
- **概念理解**: 天秤を使った等式の性質の理解
- **基本形**: ax = b タイプの方程式
- **中級**: ax + b = c タイプの方程式
- **上級**: ax + b = cx + d タイプの方程式
- **分数**: 分数を含む方程式（開発予定）
- **負の数**: 負の数を含む方程式
- **文章題**: 実生活の問題を方程式に変換
- **チャレンジ**: 総合的な応用問題（開発予定）

### 2. 天秤のメタファー
- 方程式を天秤のバランスとして視覚化
- ドラッグ＆ドロップでアイテムを移動
- 両辺への操作をアニメーションで表現
- 等式の性質を直感的に理解

### 3. ステップバイステップ解法
- 各操作を段階的に記録・表示
- 重要なステップをハイライト
- 元に戻す・やり直し機能
- 解法履歴の保存

### 4. 文章題インターフェース
- 問題文のキーワード自動抽出
- 変数定義のサポート
- 関係性の可視化
- 式の組み立て支援

### 5. 個別最適化学習
- 誤答パターン分析
- 段階的ヒント表示（最大3段階）
- 習熟度トラッキング
- スキル別進捗管理

## 技術的特徴

### コンポーネント構成
```
EquationBuilder/
├── components/
│   ├── BalanceVisualizer.tsx    # 天秤による視覚化
│   ├── EquationSolver.tsx       # 段階的解法UI
│   └── WordProblemInterface.tsx # 文章題変換UI
├── hooks/
│   └── useEquationLogic.ts      # 方程式ロジック管理
├── data/
│   └── equationProblems.ts      # 問題データベース
├── types.ts                     # 型定義
├── EquationBuilder.tsx          # メインコンポーネント
└── index.ts                     # エクスポート
```

### 主要機能
1. **リアルタイム方程式変形**: 操作即座に結果を反映
2. **Canvas描画による天秤表現**: 滑らかなアニメーション
3. **履歴管理システム**: 全ての操作を記録・再現可能
4. **適応的フィードバック**: 間違いの種類に応じた指導

## 教育的配慮

### 学習指導要領との整合性
- 中学1年生: 一次方程式の解法
- 等式の性質の理解
- 移項の概念
- 文字式の扱い
- 実生活への応用

### つまずきポイントへの対策
1. **移項時の符号変化**: 視覚的に符号が変わる様子を表示
2. **両辺への操作**: 天秤で両側同時に操作することを強調
3. **文章題の式化**: 段階的な変換プロセスを提供
4. **計算ミス**: 各ステップで検証機能

## 実装済みの問題タイプ

### 概念理解問題（2問）
- 天秤のバランスを使った基本理解
- 係数の意味と両辺操作の理解

### 基本形問題（2問）
- 3x = 12 のような単純な方程式
- 負の係数を含む方程式（-2x = 8）

### 中級問題（2問）
- 2x + 5 = 13 のような移項が必要な方程式
- 負の定数項を含む方程式（3x - 7 = 5）

### 上級問題（1問）
- 5x + 3 = 2x + 12 のような両辺に変数がある方程式

### 文章題（2問）
- 買い物の問題（りんごの個数）
- 年齢の問題（父と子の年齢関係）

## 学習の流れ

### Phase 1: 基礎理解（推奨: 2-3日）
1. 概念理解モードで天秤の仕組みを理解
2. 等式の性質を体感的に学習
3. 簡単な操作に慣れる

### Phase 2: 基本技能習得（推奨: 3-5日）
1. 基本形の方程式を解く
2. 移項の概念を理解
3. 計算の正確性を向上

### Phase 3: 応用力育成（推奨: 5-7日）
1. 複雑な方程式に挑戦
2. 文章題から式を作る
3. 実生活での応用

## 使用方法

```typescript
import { EquationBuilder } from '@materials/junior-high/grade1/math/EquationBuilder';

// 教材の使用
<EquationBuilder />
```

## カスタマイズオプション

### 設定可能項目
- アニメーション速度（遅い/普通/速い）
- 天秤表示のON/OFF
- ヒント表示レベル
- 難易度設定
- 音声読み上げ（開発予定）

## 今後の拡張予定

1. **分数を含む方程式**: 分母の処理を含む問題
2. **チャレンジモード**: 時間制限付き問題
3. **協調学習機能**: クラスでの共有・競争
4. **AR機能**: 実際の天秤を使った学習
5. **音声ガイダンス**: 問題文と解説の読み上げ

## 開発者向け情報

### 問題追加方法
```typescript
// equationProblems.ts に新しい問題を追加
export const newProblems: EquationProblem[] = [
  {
    id: 'new-problem-1',
    mode: 'intermediate',
    difficulty: 3,
    title: '新しい問題',
    description: '問題文',
    equation: createEquation(
      [{ coef: 2, var: 'x' }, { const: 3 }],
      [{ const: 11 }],
      4
    ),
    hints: ['ヒント1', 'ヒント2', 'ヒント3'],
    solutionSteps: [/* 解法ステップ */],
    objectives: ['学習目標'],
    tags: ['タグ']
  }
];
```

### 新しい操作の追加
```typescript
// useEquationLogic.ts の applyOperation 関数を拡張
case 'newOperation':
  // 新しい操作のロジックを実装
  break;
```

## 技術仕様

- **React**: 18.2.0
- **TypeScript**: 5.0.4
- **Material-UI**: 7.1.1
- **Framer Motion**: 10.12.16
- **Canvas API**: 天秤の描画
- **Zustand**: 状態管理（学習進捗）